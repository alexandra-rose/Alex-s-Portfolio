<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Alexandra Salo">

<title>Causal Inference- Final Assignment 29.5.2024</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="final_assignment_files/libs/clipboard/clipboard.min.js"></script>
<script src="final_assignment_files/libs/quarto-html/quarto.js"></script>
<script src="final_assignment_files/libs/quarto-html/popper.min.js"></script>
<script src="final_assignment_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="final_assignment_files/libs/quarto-html/anchor.min.js"></script>
<link href="final_assignment_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="final_assignment_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="final_assignment_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="final_assignment_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="final_assignment_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Causal Inference- Final Assignment 29.5.2024</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Alexandra Salo </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="exercise-1.-pre-analysis-plan" class="level2">
<h2 class="anchored" data-anchor-id="exercise-1.-pre-analysis-plan">Exercise 1. Pre-analysis plan</h2>
<p>Universal Basic Income (UBI) has become a controversial point of debate in recent years, with advocates highlighting its potential to reduce bureaucracy, enhance purchasing power, and improve mental health and dignity, while critics warn of possible increases in unemployment and sectoral work shortages. Especially in countries with already strong systems of social benefits, this is discussed as an alternative for the various social benefit packages, for example in Finland. The objective of this study is to design a research plan to evaluate the causal effects of UBI on several key outcomes in the ‘perfect world’ without any constraints.</p>
<p>The primary hypothesis is that UBI will have a positive impact on mental health and economic stability. The secondary hypothesis posits that UBI may reduce employment in certain sectors but overall improve job satisfaction and increase voluntary work participation.</p>
<section id="the-setup-of-the-study" class="level3">
<h3 class="anchored" data-anchor-id="the-setup-of-the-study">The setup of the study</h3>
<p>I propose that this study would be conducted in a few countries with diverse socioeconomic populations and the administrative capacities to implement UBI. These would be with different social infrastructures that are both still able to adequately implement this study, for example Finland, Spain and Croatia. Here we have 3 different cultures, societies but still largely quite similar as European states. Collaborations could be established with relevant ministries such as the Ministry of Social Affairs and the Ministry of Labor of each participating country, along with other public agencies, to facilitate the study’s implementation and monitoring. I choose European countries for this study because while it would be interesting to see the outcomes in vastly different societies, the integrity of the results would depend largely on the infrastructure in place and the ability to gather reliable data. It could also be interesting to see how the differences in vastly different cultures would play out in this study, so a ‘second round’ of the study could be conducted comparing a few countries in another continent, for example in South America or South-East Asia.</p>
<p>Success in this study will be defined by improvements in different metrics. Primary success metrics would include employment rates, mental health indicators, and economic behavior such as consumption patterns and savings rates. Secondary metrics encompass reductions in state bureaucracy, enhanced social cohesion, and overall public health improvements. These figures could be taken from third-party data sources, eg. a ministry’s budget for example or calculations made.</p>
<p>To comprehensively evaluate the impact of UBI, the study will measure several outcome indicators. Employment outcomes will include unemployment rates and changes in sectoral employment. Mental health outcomes will be assessed through self-reported well-being, stress levels, and usage of mental health services. Economic behavior will be tracked by analyzing self-reported consumption patterns, savings rates, and poverty levels.</p>
<p>Sample size calculations will be conducted based on power calculations to ensure sufficient statistical power to detect anticipated effect sizes. Probabilistic sampling methods would be used to select a representative sample of the population, with additional participants included to account for potential attrition. Participants will be randomly assigned to either receive UBI (treatment group) or not (control group). I suggest the UBI given be adjusted for the country in question, and would not be a large enough sum to live off of comfortably in the country. To ensure comparability, randomization will be stratified by key demographic variables such as age, gender, and socioeconomic background. This stratified randomization will help balance the groups and improve the reliability of the results. Across different countries relatively similar groups will be aimed to be achieved, however this would take into account the relevant income levels in a country and other socioeconomic factors.</p>
<p>The control group, which does not receive UBI, will serve as the counterfactual, representing what would have happened in the absence of UBI. Additionally, the study would employ instrumental variables to address potential non-compliance and ensure robustness. I suggest geographical distance from administrative centers or date of birth could serve as instruments as these may affect the likelihood of complying with the studies rules.</p>
<p>Baseline data will be collected before the implementation of UBI to understand initial conditions. Follow-up data will be gathered at multiple intervals (e.g., every month or 2-3 months) to capture both short-term and long-term impacts. The study in itself would be 2 years long, so we would be able to rule out any seasonal/ short term factors that may be affecting our outcome variables. Data collected will include surveys administered to the participants and administrative records to ensure comprehensive coverage.</p>
</section>
<section id="the-analysis-plan" class="level3">
<h3 class="anchored" data-anchor-id="the-analysis-plan">The analysis plan</h3>
<p>The primary strategy for the analysis will be using the randomized controlled trial (RCT). Additionally, IV analysis will be conducted to handle non-compliance and potential spillover effects. The chosen instruments will be validated to ensure they affect the likelihood of receiving UBI but do not directly impact the outcome variables. Randomization inherently reduces selection bias by ensuring equal chances of receiving UBI across participants. To further minimize bias, blinding will be implemented where feasible within the different countries. Balance tests will be conducted to confirm that treatment and control groups are comparable at baseline.</p>
<p>The study will utilize regression analysis, specifically difference-in-differences (DiD) models, to compare changes over time between the treatment and control groups. For addressing non-compliance, a two-stage least squares (2SLS) regression will be used, leveraging IV analysis. The independent variable will be the reception of UBI, while dependent variables will include employment status, mental health scores, and economic behavior indicators. Control variables such as demographic characteristics, initial socioeconomic status, and regional economic conditions will be included to refine the analysis.</p>
<p>The statistical analysis will begin with descriptive statistics to summarize baseline characteristics and outcome variables. Inferential statistics, including t-tests, chi-square tests, and regression analysis, will be employed to test hypotheses. Robustness checks will be performed through sensitivity analyses to ensure the validity of the findings. Power analysis as mentioned prior will determine the minimum sample size required to detect significant effects. Adjustments will be made for expected attrition and non-compliance to ensure the study retains sufficient power throughout its duration.</p>
<p>The study will follow a detailed timeline from planning and data collection to implementation and analysis. The budget will cover participant recruitment, data collection, personnel, and logistical costs, ensuring the study is adequately funded for its entire duration, in the perfect world there would be no limit to this budget.</p>
<p>Ethical approval will be obtained from relevant institutional review boards after proposing this research. Informed consent will be secured from all participants, and measures will be implemented to protect data privacy and ensure that there are no breaches of confidentiality.</p>
</section>
</section>
<section id="exercise-3" class="level2">
<h2 class="anchored" data-anchor-id="exercise-3">Exercise 3</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load necessary libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rdrobust)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(foreign)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelsummary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'modelsummary' was built under R version 4.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`modelsummary` 2.0.0 now uses `tinytable` as its default table-drawing
  backend. Learn more at: https://vincentarelbundock.github.io/tinytable/

Revert to `kableExtra` for one session:

  options(modelsummary_factory_default = 'kableExtra')

Change the default backend persistently:

  config_modelsummary(factory_default = 'gt')

Silence this message forever:

  config_modelsummary(startup_message = FALSE)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rdrobust)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rddensity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'rddensity' was built under R version 4.3.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the dataset</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>extremist_data <span class="ot">&lt;-</span> <span class="fu">read.dta</span>(<span class="st">"./Extremist (1).dta"</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the running variable and outcome variables</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>rv <span class="ot">&lt;-</span> extremist_data<span class="sc">$</span>rv</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>extremist_data <span class="ot">&lt;-</span> extremist_data <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">vote_share =</span> dv,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">win_prob =</span> dv_win</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Visualize treatment assignment</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(extremist_data, <span class="fu">aes</span>(<span class="at">x =</span> rv, <span class="at">y =</span> <span class="fu">as.factor</span>(treat), <span class="at">color =</span> <span class="fu">as.factor</span>(treat))) <span class="sc">+</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="dv">0</span>, <span class="at">height =</span> <span class="fl">0.25</span>, <span class="at">seed =</span> <span class="dv">1234</span>)) <span class="sc">+</span> </span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>) <span class="sc">+</span> </span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Running Variable (rv)"</span>, <span class="at">y =</span> <span class="st">"Treatment Assignment (treat)"</span>) <span class="sc">+</span> </span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The `&lt;scale&gt;` argument of `guides()` cannot be `FALSE`. Use "none" instead as
of ggplot2 3.3.4.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="final_assignment_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Verify compliance with the assignment rule</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>extremist_data <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(treat, rv <span class="sc">&lt;=</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'treat'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
# Groups:   treat [2]
  treat `rv &lt;= 0` count
  &lt;dbl&gt; &lt;lgl&gt;     &lt;int&gt;
1     0 TRUE        259
2     1 FALSE       245</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Check for discontinuity in the running variable</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(extremist_data, <span class="fu">aes</span>(<span class="at">x =</span> rv, <span class="at">fill =</span> <span class="fu">as.factor</span>(treat))) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.05</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">boundary =</span> <span class="dv">0</span>) <span class="sc">+</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>) <span class="sc">+</span> </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Running Variable (rv)"</span>, <span class="at">y =</span> <span class="st">"Count"</span>, <span class="at">fill =</span> <span class="st">"Treatment"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="final_assignment_files/figure-html/unnamed-chunk-1-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Density test for discontinuity</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>test_density <span class="ot">&lt;-</span> <span class="fu">rddensity</span>(extremist_data<span class="sc">$</span>rv, <span class="at">c =</span> <span class="dv">0</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(test_density)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Manipulation testing using local polynomial density estimation.

Number of obs =       504
Model =               unrestricted
Kernel =              triangular
BW method =           estimated
VCE method =          jackknife

c = 0                 Left of c           Right of c          
Number of obs         259                 245                 
Eff. Number of obs    181                 183                 
Order est. (p)        2                   2                   
Order bias (q)        3                   3                   
BW est. (h)           0.117               0.137               

Method                T                   P &gt; |T|             
Robust                -0.1833             0.8546              


P-values of binomial tests (H0: p=0.5).

Window Length              &lt;c     &gt;=c    P&gt;|T|
0.014     + 0.014          26      20    0.4614
0.025     + 0.028          55      44    0.3149
0.037     + 0.041          70      69    1.0000
0.048     + 0.055          85      93    0.5999
0.060     + 0.069         111     106    0.7861
0.071     + 0.082         127     130    0.9007
0.083     + 0.096         142     144    0.9529
0.094     + 0.110         151     158    0.7329
0.106     + 0.124         165     175    0.6255
0.117     + 0.137         181     183    0.9582</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>plot_density_test <span class="ot">&lt;-</span> <span class="fu">rdplotdensity</span>(<span class="at">rdd =</span> test_density, </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">X =</span> extremist_data<span class="sc">$</span>rv, </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">type =</span> <span class="st">"both"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="final_assignment_files/figure-html/unnamed-chunk-1-3.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The first plot shows a clear assignment rule: individuals with rv greater than 0 receive the treatment, while those with rv less than or equal to 0 do not. The points are well-separated around the cutoff, indicating compliance with the assignment rule.</p>
<p>The histogram shows the distribution of the running variable on either side of the cutoff. The distribution appears smooth around the cutoff, with no significant jump or discontinuity, suggesting no manipulation of the running variable around the cutoff.</p>
<p>The density plot shows the estimated density of the running variable around the cutoff. The densities on either side of the cutoff are visually similar, and the confidence intervals overlap, indicating no significant discontinuity. This visual evidence complements the statistical results, supporting the conclusion that there is no manipulation of the running variable around the cutoff.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Check for discontinuity in the outcome variables</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the plot</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(extremist_data, <span class="fu">aes</span>(<span class="at">x =</span> rv, <span class="at">y =</span> vote_share, <span class="at">color =</span> <span class="fu">as.factor</span>(treat))) <span class="sc">+</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">data =</span> <span class="fu">filter</span>(extremist_data, rv <span class="sc">&lt;=</span> <span class="dv">0</span>), <span class="fu">aes</span>(<span class="at">x =</span> rv, <span class="at">y =</span> vote_share), <span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">data =</span> <span class="fu">filter</span>(extremist_data, rv <span class="sc">&gt;</span> <span class="dv">0</span>), <span class="fu">aes</span>(<span class="at">x =</span> rv, <span class="at">y =</span> vote_share), <span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Running Variable (rv)"</span>, <span class="at">y =</span> <span class="st">"Vote Share"</span>, <span class="at">color =</span> <span class="st">"Treatment"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="final_assignment_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Basic plot with only points, I couldnt get adding smooth line to work</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(extremist_data, <span class="fu">aes</span>(<span class="at">x =</span> rv, <span class="at">y =</span> win_prob, <span class="at">color =</span> <span class="fu">as.factor</span>(treat))) <span class="sc">+</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">data =</span> <span class="fu">filter</span>(extremist_data, rv <span class="sc">&lt;=</span> <span class="dv">0</span>), <span class="fu">aes</span>(<span class="at">x =</span> rv, <span class="at">y =</span> win_prob), <span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">data =</span> <span class="fu">filter</span>(extremist_data, rv <span class="sc">&gt;</span> <span class="dv">0</span>), <span class="fu">aes</span>(<span class="at">x =</span> rv, <span class="at">y =</span> win_prob), <span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Running Variable (rv)"</span>, <span class="at">y =</span> <span class="st">"Probability of Winning"</span>, <span class="at">color =</span> <span class="st">"Treatment"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="final_assignment_files/figure-html/unnamed-chunk-2-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Measure the size of the effect</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Parametric estimation</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>extremist_centered <span class="ot">&lt;-</span> extremist_data <span class="sc">%&gt;%</span> </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rv_centered =</span> rv <span class="sc">-</span> <span class="dv">0</span>)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>model_simple <span class="ot">&lt;-</span> <span class="fu">lm</span>(vote_share <span class="sc">~</span> rv_centered <span class="sc">+</span> treat, <span class="at">data =</span> extremist_centered)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(model_simple)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  term        estimate std.error statistic   p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)   0.607     0.0112    54.1   2.48e-211
2 rv_centered   0.0628    0.0834     0.753 4.52e-  1
3 treat        -0.0389    0.0195    -1.99  4.68e-  2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>model_bw_10 <span class="ot">&lt;-</span> <span class="fu">lm</span>(vote_share <span class="sc">~</span> rv_centered <span class="sc">+</span> treat, <span class="at">data =</span> <span class="fu">filter</span>(extremist_centered, rv_centered <span class="sc">&gt;=</span> <span class="sc">-</span><span class="fl">0.1</span> <span class="sc">&amp;</span> rv_centered <span class="sc">&lt;=</span> <span class="fl">0.1</span>))</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(model_bw_10)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  term        estimate std.error statistic   p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)   0.577     0.0154    37.5   7.19e-117
2 rv_centered  -0.312     0.258     -1.21  2.29e-  1
3 treat        -0.0117    0.0280    -0.418 6.76e-  1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>model_bw_5 <span class="ot">&lt;-</span> <span class="fu">lm</span>(vote_share <span class="sc">~</span> rv_centered <span class="sc">+</span> treat, <span class="at">data =</span> <span class="fu">filter</span>(extremist_centered, rv_centered <span class="sc">&gt;=</span> <span class="sc">-</span><span class="fl">0.05</span> <span class="sc">&amp;</span> rv_centered <span class="sc">&lt;=</span> <span class="fl">0.05</span>))</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(model_bw_5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)   0.593     0.0217    27.3   4.52e-64
2 rv_centered   0.473     0.717      0.660 5.10e- 1
3 treat        -0.0465    0.0404    -1.15  2.51e- 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(<span class="fu">list</span>(<span class="st">"Full data"</span> <span class="ot">=</span> model_simple, <span class="st">"Bandwidth = 10"</span> <span class="ot">=</span> model_bw_10, <span class="st">"Bandwidth = 5"</span> <span class="ot">=</span> model_bw_5))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

 

  
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tinytable_ckhwtjz71c5gqkhrb06m</title>
    <style>
.table td.tinytable_css_u7485bwocca9sdnnkqdo, .table th.tinytable_css_u7485bwocca9sdnnkqdo {    border-bottom: solid 0.1em #d3d8dc; }
.table td.tinytable_css_ftdzbqx79y54w3brc9sk, .table th.tinytable_css_ftdzbqx79y54w3brc9sk {    text-align: left; }
.table td.tinytable_css_id8maci9yqpwuaan92z0, .table th.tinytable_css_id8maci9yqpwuaan92z0 {    text-align: center; }
.table td.tinytable_css_arkssubhi2dv72mdopt1, .table th.tinytable_css_arkssubhi2dv72mdopt1 {    text-align: center; }
.table td.tinytable_css_ekm7y84u2ehlf5xn18af, .table th.tinytable_css_ekm7y84u2ehlf5xn18af {    text-align: center; }
.table td.tinytable_css_f24eziax8a1rjpuzur7w, .table th.tinytable_css_f24eziax8a1rjpuzur7w {    border-bottom: solid 0.05em black; }
    </style>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
    </script>
  

  
    <div class="container">
      <table class="table table-borderless" id="tinytable_ckhwtjz71c5gqkhrb06m" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">Full data</th>
                <th scope="col">Bandwidth = 10</th>
                <th scope="col">Bandwidth = 5</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td>(Intercept)</td>
                  <td>0.607  </td>
                  <td>0.577  </td>
                  <td>0.593  </td>
                </tr>
                <tr>
                  <td>           </td>
                  <td>(0.011)</td>
                  <td>(0.015)</td>
                  <td>(0.022)</td>
                </tr>
                <tr>
                  <td>rv_centered</td>
                  <td>0.063  </td>
                  <td>-0.312 </td>
                  <td>0.473  </td>
                </tr>
                <tr>
                  <td>           </td>
                  <td>(0.083)</td>
                  <td>(0.258)</td>
                  <td>(0.717)</td>
                </tr>
                <tr>
                  <td>treat      </td>
                  <td>-0.039 </td>
                  <td>-0.012 </td>
                  <td>-0.046 </td>
                </tr>
                <tr>
                  <td>           </td>
                  <td>(0.020)</td>
                  <td>(0.028)</td>
                  <td>(0.040)</td>
                </tr>
                <tr>
                  <td>Num.Obs.   </td>
                  <td>504    </td>
                  <td>311    </td>
                  <td>173    </td>
                </tr>
                <tr>
                  <td>R2         </td>
                  <td>0.011  </td>
                  <td>0.029  </td>
                  <td>0.011  </td>
                </tr>
                <tr>
                  <td>R2 Adj.    </td>
                  <td>0.007  </td>
                  <td>0.023  </td>
                  <td>-0.001 </td>
                </tr>
                <tr>
                  <td>AIC        </td>
                  <td>-578.9 </td>
                  <td>-391.3 </td>
                  <td>-212.9 </td>
                </tr>
                <tr>
                  <td>BIC        </td>
                  <td>-562.1 </td>
                  <td>-376.4 </td>
                  <td>-200.3 </td>
                </tr>
                <tr>
                  <td>Log.Lik.   </td>
                  <td>293.473</td>
                  <td>199.655</td>
                  <td>110.440</td>
                </tr>
                <tr>
                  <td>F          </td>
                  <td>2.848  </td>
                  <td>4.618  </td>
                  <td>0.916  </td>
                </tr>
                <tr>
                  <td>RMSE       </td>
                  <td>0.14   </td>
                  <td>0.13   </td>
                  <td>0.13   </td>
                </tr>
        </tbody>
      </table>
    </div>

    <script>
      function styleCell_tinytable_ki14wmvx7vf9y867qdkj(i, j, css_id) {
        var table = document.getElementById("tinytable_ckhwtjz71c5gqkhrb06m");
        table.rows[i].cells[j].classList.add(css_id);
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_ckhwtjz71c5gqkhrb06m');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_tinytable_ki14wmvx7vf9y867qdkj(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_ckhwtjz71c5gqkhrb06m");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }

window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(0, 0, 'tinytable_css_u7485bwocca9sdnnkqdo') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(0, 1, 'tinytable_css_u7485bwocca9sdnnkqdo') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(0, 2, 'tinytable_css_u7485bwocca9sdnnkqdo') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(0, 3, 'tinytable_css_u7485bwocca9sdnnkqdo') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(0, 0, 'tinytable_css_ftdzbqx79y54w3brc9sk') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(1, 0, 'tinytable_css_ftdzbqx79y54w3brc9sk') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(2, 0, 'tinytable_css_ftdzbqx79y54w3brc9sk') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(3, 0, 'tinytable_css_ftdzbqx79y54w3brc9sk') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(4, 0, 'tinytable_css_ftdzbqx79y54w3brc9sk') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(5, 0, 'tinytable_css_ftdzbqx79y54w3brc9sk') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(6, 0, 'tinytable_css_ftdzbqx79y54w3brc9sk') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(7, 0, 'tinytable_css_ftdzbqx79y54w3brc9sk') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(8, 0, 'tinytable_css_ftdzbqx79y54w3brc9sk') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(9, 0, 'tinytable_css_ftdzbqx79y54w3brc9sk') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(10, 0, 'tinytable_css_ftdzbqx79y54w3brc9sk') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(11, 0, 'tinytable_css_ftdzbqx79y54w3brc9sk') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(12, 0, 'tinytable_css_ftdzbqx79y54w3brc9sk') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(13, 0, 'tinytable_css_ftdzbqx79y54w3brc9sk') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(14, 0, 'tinytable_css_ftdzbqx79y54w3brc9sk') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(0, 1, 'tinytable_css_id8maci9yqpwuaan92z0') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(1, 1, 'tinytable_css_id8maci9yqpwuaan92z0') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(2, 1, 'tinytable_css_id8maci9yqpwuaan92z0') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(3, 1, 'tinytable_css_id8maci9yqpwuaan92z0') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(4, 1, 'tinytable_css_id8maci9yqpwuaan92z0') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(5, 1, 'tinytable_css_id8maci9yqpwuaan92z0') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(6, 1, 'tinytable_css_id8maci9yqpwuaan92z0') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(7, 1, 'tinytable_css_id8maci9yqpwuaan92z0') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(8, 1, 'tinytable_css_id8maci9yqpwuaan92z0') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(9, 1, 'tinytable_css_id8maci9yqpwuaan92z0') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(10, 1, 'tinytable_css_id8maci9yqpwuaan92z0') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(11, 1, 'tinytable_css_id8maci9yqpwuaan92z0') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(12, 1, 'tinytable_css_id8maci9yqpwuaan92z0') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(13, 1, 'tinytable_css_id8maci9yqpwuaan92z0') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(14, 1, 'tinytable_css_id8maci9yqpwuaan92z0') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(0, 2, 'tinytable_css_arkssubhi2dv72mdopt1') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(1, 2, 'tinytable_css_arkssubhi2dv72mdopt1') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(2, 2, 'tinytable_css_arkssubhi2dv72mdopt1') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(3, 2, 'tinytable_css_arkssubhi2dv72mdopt1') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(4, 2, 'tinytable_css_arkssubhi2dv72mdopt1') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(5, 2, 'tinytable_css_arkssubhi2dv72mdopt1') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(6, 2, 'tinytable_css_arkssubhi2dv72mdopt1') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(7, 2, 'tinytable_css_arkssubhi2dv72mdopt1') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(8, 2, 'tinytable_css_arkssubhi2dv72mdopt1') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(9, 2, 'tinytable_css_arkssubhi2dv72mdopt1') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(10, 2, 'tinytable_css_arkssubhi2dv72mdopt1') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(11, 2, 'tinytable_css_arkssubhi2dv72mdopt1') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(12, 2, 'tinytable_css_arkssubhi2dv72mdopt1') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(13, 2, 'tinytable_css_arkssubhi2dv72mdopt1') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(14, 2, 'tinytable_css_arkssubhi2dv72mdopt1') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(0, 3, 'tinytable_css_ekm7y84u2ehlf5xn18af') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(1, 3, 'tinytable_css_ekm7y84u2ehlf5xn18af') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(2, 3, 'tinytable_css_ekm7y84u2ehlf5xn18af') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(3, 3, 'tinytable_css_ekm7y84u2ehlf5xn18af') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(4, 3, 'tinytable_css_ekm7y84u2ehlf5xn18af') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(5, 3, 'tinytable_css_ekm7y84u2ehlf5xn18af') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(6, 3, 'tinytable_css_ekm7y84u2ehlf5xn18af') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(7, 3, 'tinytable_css_ekm7y84u2ehlf5xn18af') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(8, 3, 'tinytable_css_ekm7y84u2ehlf5xn18af') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(9, 3, 'tinytable_css_ekm7y84u2ehlf5xn18af') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(10, 3, 'tinytable_css_ekm7y84u2ehlf5xn18af') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(11, 3, 'tinytable_css_ekm7y84u2ehlf5xn18af') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(12, 3, 'tinytable_css_ekm7y84u2ehlf5xn18af') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(13, 3, 'tinytable_css_ekm7y84u2ehlf5xn18af') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(14, 3, 'tinytable_css_ekm7y84u2ehlf5xn18af') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(6, 0, 'tinytable_css_f24eziax8a1rjpuzur7w') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(6, 1, 'tinytable_css_f24eziax8a1rjpuzur7w') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(6, 2, 'tinytable_css_f24eziax8a1rjpuzur7w') })
window.addEventListener('load', function () { styleCell_tinytable_ki14wmvx7vf9y867qdkj(6, 3, 'tinytable_css_f24eziax8a1rjpuzur7w') })
    </script>

  


</div>
</div>
<p>In the first plot it shows a slight difference in the fitted lines on either side of the cutoff.There appears to be a small discontinuity at the cutoff, suggesting a potential effect of the treatment on vote share.In the second plot it shows a noticeable difference in the fitted lines on either side of the cutoff. There is a visible discontinuity at the cutoff, suggesting a more substantial effect of the treatment on the probability of winning.</p>
<p>The models indicate a small negative effect of the treatment on vote share, with the magnitude of the effect varying slightly depending on the bandwidth used.The R² values are generally low, suggesting that the models do not explain much of the variance in vote share.</p>
<p>Overall, the analysis suggests a small but noticeable effect of the treatment on both vote share and probability of winning, with the effect on the probability of winning being more pronounced. The models fitted with narrower bandwidths provide a more localized estimate of the treatment effect, which is a common approach in regression discontinuity design to ensure that the estimates are more relevant to observations near the cutoff.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Non-parametric estimation</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>rdd_nonparam <span class="ot">&lt;-</span> <span class="fu">rdrobust</span>(<span class="at">y =</span> extremist_data<span class="sc">$</span>vote_share, <span class="at">x =</span> extremist_data<span class="sc">$</span>rv, <span class="at">c =</span> <span class="dv">0</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(rdd_nonparam)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sharp RD estimates using local polynomial regression.

Number of Obs.                  504
BW type                       mserd
Kernel                   Triangular
VCE method                       NN

Number of Obs.                  259          245
Eff. Number of Obs.             138          127
Order est. (p)                    1            1
Order bias  (q)                   2            2
BW est. (h)                   0.081        0.081
BW bias (b)                   0.142        0.142
rho (h/b)                     0.571        0.571
Unique Obs.                     259          245

=============================================================================
        Method     Coef. Std. Err.         z     P&gt;|z|      [ 95% C.I. ]       
=============================================================================
  Conventional    -0.034     0.028    -1.227     0.220    [-0.089 , 0.020]     
        Robust         -         -    -1.091     0.275    [-0.101 , 0.029]     
=============================================================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot non-parametric model</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rdplot</span>(<span class="at">y =</span> extremist_data<span class="sc">$</span>vote_share, <span class="at">x =</span> extremist_data<span class="sc">$</span>rv, <span class="at">c =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="final_assignment_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Varying bandwidths for sensitivity analysis</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rdrobust</span>(<span class="at">y =</span> extremist_data<span class="sc">$</span>vote_share, <span class="at">x =</span> extremist_data<span class="sc">$</span>rv, <span class="at">c =</span> <span class="dv">0</span>, <span class="at">h =</span> rdd_nonparam<span class="sc">$</span>bws[<span class="dv">1</span>]) <span class="sc">%&gt;%</span> <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sharp RD estimates using local polynomial regression.

Number of Obs.                  504
BW type                      Manual
Kernel                   Triangular
VCE method                       NN

Number of Obs.                  259          245
Eff. Number of Obs.             138          127
Order est. (p)                    1            1
Order bias  (q)                   2            2
BW est. (h)                   0.081        0.081
BW bias (b)                   0.081        0.081
rho (h/b)                     1.000        1.000
Unique Obs.                     259          245

=============================================================================
        Method     Coef. Std. Err.         z     P&gt;|z|      [ 95% C.I. ]       
=============================================================================
  Conventional    -0.034     0.028    -1.227     0.220    [-0.089 , 0.020]     
        Robust         -         -    -1.276     0.202    [-0.138 , 0.029]     
=============================================================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rdrobust</span>(<span class="at">y =</span> extremist_data<span class="sc">$</span>vote_share, <span class="at">x =</span> extremist_data<span class="sc">$</span>rv, <span class="at">c =</span> <span class="dv">0</span>, <span class="at">h =</span> rdd_nonparam<span class="sc">$</span>bws[<span class="dv">1</span>] <span class="sc">*</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sharp RD estimates using local polynomial regression.

Number of Obs.                  504
BW type                      Manual
Kernel                   Triangular
VCE method                       NN

Number of Obs.                  259          245
Eff. Number of Obs.             225          202
Order est. (p)                    1            1
Order bias  (q)                   2            2
BW est. (h)                   0.162        0.162
BW bias (b)                   0.162        0.162
rho (h/b)                     1.000        1.000
Unique Obs.                     259          245

=============================================================================
        Method     Coef. Std. Err.         z     P&gt;|z|      [ 95% C.I. ]       
=============================================================================
  Conventional    -0.026     0.022    -1.144     0.253    [-0.069 , 0.018]     
        Robust         -         -    -0.722     0.471    [-0.081 , 0.037]     
=============================================================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rdrobust</span>(<span class="at">y =</span> extremist_data<span class="sc">$</span>vote_share, <span class="at">x =</span> extremist_data<span class="sc">$</span>rv, <span class="at">c =</span> <span class="dv">0</span>, <span class="at">h =</span> rdd_nonparam<span class="sc">$</span>bws[<span class="dv">1</span>] <span class="sc">/</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sharp RD estimates using local polynomial regression.

Number of Obs.                  504
BW type                      Manual
Kernel                   Triangular
VCE method                       NN

Number of Obs.                  259          245
Eff. Number of Obs.              73           68
Order est. (p)                    1            1
Order bias  (q)                   2            2
BW est. (h)                   0.040        0.040
BW bias (b)                   0.040        0.040
rho (h/b)                     1.000        1.000
Unique Obs.                     259          245

=============================================================================
        Method     Coef. Std. Err.         z     P&gt;|z|      [ 95% C.I. ]       
=============================================================================
  Conventional    -0.035     0.040    -0.866     0.387    [-0.114 , 0.044]     
        Robust         -         -    -0.752     0.452    [-0.174 , 0.078]     
=============================================================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Varying kernels for sensitivity analysis</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rdrobust</span>(<span class="at">y =</span> extremist_data<span class="sc">$</span>vote_share, <span class="at">x =</span> extremist_data<span class="sc">$</span>rv, <span class="at">c =</span> <span class="dv">0</span>, <span class="at">kernel =</span> <span class="st">"epanechnikov"</span>) <span class="sc">%&gt;%</span> <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sharp RD estimates using local polynomial regression.

Number of Obs.                  504
BW type                       mserd
Kernel                   Epanechnikov
VCE method                       NN

Number of Obs.                  259          245
Eff. Number of Obs.             137          127
Order est. (p)                    1            1
Order bias  (q)                   2            2
BW est. (h)                   0.080        0.080
BW bias (b)                   0.145        0.145
rho (h/b)                     0.553        0.553
Unique Obs.                     259          245

=============================================================================
        Method     Coef. Std. Err.         z     P&gt;|z|      [ 95% C.I. ]       
=============================================================================
  Conventional    -0.032     0.028    -1.151     0.250    [-0.086 , 0.022]     
        Robust         -         -    -0.932     0.351    [-0.095 , 0.034]     
=============================================================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rdrobust</span>(<span class="at">y =</span> extremist_data<span class="sc">$</span>vote_share, <span class="at">x =</span> extremist_data<span class="sc">$</span>rv, <span class="at">c =</span> <span class="dv">0</span>, <span class="at">kernel =</span> <span class="st">"uniform"</span>) <span class="sc">%&gt;%</span> <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sharp RD estimates using local polynomial regression.

Number of Obs.                  504
BW type                       mserd
Kernel                      Uniform
VCE method                       NN

Number of Obs.                  259          245
Eff. Number of Obs.             124          106
Order est. (p)                    1            1
Order bias  (q)                   2            2
BW est. (h)                   0.068        0.068
BW bias (b)                   0.136        0.136
rho (h/b)                     0.502        0.502
Unique Obs.                     259          245

=============================================================================
        Method     Coef. Std. Err.         z     P&gt;|z|      [ 95% C.I. ]       
=============================================================================
  Conventional    -0.030     0.029    -1.007     0.314    [-0.087 , 0.028]     
        Robust         -         -    -0.682     0.495    [-0.089 , 0.043]     
=============================================================================</code></pre>
</div>
</div>
<p>The estimate of the treatment effect (-0.034) suggests that an extremist victory in the primary reduces the general election vote share of the party by 3.4 percentage points. However, this effect is not statistically significant at the 5% level (p-value = 0.220 for the conventional method). The estimated bandwidth (h) is 0.081, indicating the range around the cutoff used for the regression.</p>
<p>The treatment effect remains negative across different bandwidths but is not statistically significant in any case.The magnitude of the effect is relatively stable around -3% to -3.5%, suggesting robustness in the direction of the effect.</p>
<p>The direction and magnitude of the effect remain consistent with the original estimate when using different kernels, indicating robustness in the results. The treatment effect is slightly less negative with the uniform kernel but still not statistically significant.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Heterogeneity analysis for safe vs. open districts</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>safe <span class="ot">&lt;-</span> extremist_data<span class="sc">$</span>safe_for_party</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>rdd_safe <span class="ot">&lt;-</span> <span class="fu">rdrobust</span>(extremist_data<span class="sc">$</span>vote_share[safe <span class="sc">==</span> <span class="dv">1</span>], rv[safe <span class="sc">==</span> <span class="dv">1</span>])</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>rdd_open <span class="ot">&lt;-</span> <span class="fu">rdrobust</span>(extremist_data<span class="sc">$</span>vote_share[safe <span class="sc">==</span> <span class="dv">0</span>], rv[safe <span class="sc">==</span> <span class="dv">0</span>])</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(rdd_safe)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sharp RD estimates using local polynomial regression.

Number of Obs.                  175
BW type                       mserd
Kernel                   Triangular
VCE method                       NN

Number of Obs.                   95           80
Eff. Number of Obs.              58           41
Order est. (p)                    1            1
Order bias  (q)                   2            2
BW est. (h)                   0.102        0.102
BW bias (b)                   0.185        0.185
rho (h/b)                     0.551        0.551
Unique Obs.                      95           80

=============================================================================
        Method     Coef. Std. Err.         z     P&gt;|z|      [ 95% C.I. ]       
=============================================================================
  Conventional     0.030     0.053     0.569     0.569    [-0.074 , 0.135]     
        Robust         -         -     0.750     0.453    [-0.077 , 0.171]     
=============================================================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(rdd_open)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sharp RD estimates using local polynomial regression.

Number of Obs.                  329
BW type                       mserd
Kernel                   Triangular
VCE method                       NN

Number of Obs.                  164          165
Eff. Number of Obs.             101          105
Order est. (p)                    1            1
Order bias  (q)                   2            2
BW est. (h)                   0.096        0.096
BW bias (b)                   0.167        0.167
rho (h/b)                     0.574        0.574
Unique Obs.                     164          165

=============================================================================
        Method     Coef. Std. Err.         z     P&gt;|z|      [ 95% C.I. ]       
=============================================================================
  Conventional    -0.015     0.027    -0.545     0.585    [-0.067 , 0.038]     
        Robust         -         -    -0.363     0.717    [-0.071 , 0.048]     
=============================================================================</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for discontinuity in heterogeneity analysis</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> extremist_data, <span class="fu">aes</span>(<span class="at">x =</span> rv, <span class="at">y =</span> vote_share, <span class="at">color =</span> <span class="fu">as.factor</span>(safe)), <span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">data =</span> <span class="fu">filter</span>(extremist_data, rv <span class="sc">&lt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> safe <span class="sc">==</span> <span class="dv">1</span>), <span class="fu">aes</span>(<span class="at">x =</span> rv, <span class="at">y =</span> vote_share), <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">data =</span> <span class="fu">filter</span>(extremist_data, rv <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> safe <span class="sc">==</span> <span class="dv">1</span>), <span class="fu">aes</span>(<span class="at">x =</span> rv, <span class="at">y =</span> vote_share), <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">data =</span> <span class="fu">filter</span>(extremist_data, rv <span class="sc">&lt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> safe <span class="sc">==</span> <span class="dv">0</span>), <span class="fu">aes</span>(<span class="at">x =</span> rv, <span class="at">y =</span> vote_share), <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">data =</span> <span class="fu">filter</span>(extremist_data, rv <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> safe <span class="sc">==</span> <span class="dv">0</span>), <span class="fu">aes</span>(<span class="at">x =</span> rv, <span class="at">y =</span> vote_share), <span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Running Variable (rv)"</span>, <span class="at">y =</span> <span class="st">"Vote Share"</span>, <span class="at">color =</span> <span class="st">"District Type (Safe/Not Safe)"</span>) <span class="sc">+</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"0"</span> <span class="ot">=</span> <span class="st">"red"</span>, <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"blue"</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"0"</span> <span class="ot">=</span> <span class="st">"Not Safe"</span>, <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Safe"</span>)) <span class="sc">+</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="final_assignment_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Statistically for safe districts, the estimated effect at the cutoff is positive but not statistically significant. For not safe districts, the estimated effect at the cutoff is negative but also not statistically significant.</p>
<p>Then we can visualize this in a plot. The plot visualizes the vote share as a function of the running variable (rv) for two types of districts: safe and not safe. The blue lines represent safe districts, and the red dashed lines represent not safe districts.</p>
<p>There is a noticeable upward trend in the vote share as the running variable increases for safe districts.The discontinuity at the cutoff point (rv = 0) indicates a significant jump in vote share for districts considered safe.</p>
<p>The trend in vote share for not safe districts appears more flat or slightly decreasing as the running variable increases. There is less evident discontinuity at the cutoff point compared to safe districts. These insights suggest that the impact of an extremist primary victory on the vote share might be more pronounced in safe districts than in not safe districts.</p>
<p>###Conclusion</p>
<p>This analysis has used Regression Discontinuity Design (RDD) to investigate the impact of extremist primary victories on general election outcomes, focusing on vote share and probability of winning. The results showed a small, negative, but statistically insignificant effect on vote share (around 3-4 percentage points) and probability of winning, with greater variability in not safe districts. The heterogeneity analysis suggested a more pronounced effect in safe districts, but still not significant. Sensitivity analyses with varying bandwidths and kernels confirmed the robustness in the direction of the effect, though statistical significance remained elusive.</p>
<p>Comparing these findings to Hall’s study, which analyzed U.S. House elections from 1980-2010, reveals key differences. Hall’s study reported significant and substantial electoral penalties for extremist candidates, with general election vote share decreasing by 9-13 percentage points and the probability of winning dropping by 35-54 percentage points. This contrast highlights the stronger and more conclusive evidence in Hall’s work, emphasizing the strategic disadvantage of nominating extremist candidates in primaries, which was not as evident in this analysis due to smaller effect sizes and lack of statistical significance.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>